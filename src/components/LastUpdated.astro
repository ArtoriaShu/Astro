---
import dayjs from 'dayjs';
import 'dayjs/locale/zh-cn';
import utc from 'dayjs/plugin/utc';
import localizedFormat from 'dayjs/plugin/localizedFormat';
import relativeTime from 'dayjs/plugin/relativeTime';

dayjs.extend(utc);
dayjs.extend(localizedFormat);
dayjs.extend(relativeTime);
dayjs.locale('zh-cn');

const { lastModified } = Astro.props;

// 调试输出
console.log("LastUpdated组件接收到的日期:", lastModified);

// 检查是否有有效的lastModified值
let formattedDate;
if (lastModified && lastModified !== 'null' && lastModified !== 'undefined') {
  formattedDate = dayjs(lastModified).format('YYYY年MM月DD日 HH:mm:ss');
  console.log("格式化后的日期:", formattedDate);
} else {
  formattedDate = '通过Git提交来更新此时间';
  console.log("无效的日期，使用默认提示");
}
---

<div class="last-updated">
  <p>最后更新时间: {formattedDate}</p>
  {!lastModified && <p class="hint">提示：这个时间是根据Git提交历史显示的，请先提交更改</p>}
</div>

<style>
  .last-updated {
    margin-top: 2rem;
    font-size: 0.9rem;
    color: var(--sl-color-gray-3);
  }
  .hint {
    font-size: 0.8rem;
    color: var(--sl-color-gray-4);
    margin-top: 0.25rem;
    font-style: italic;
  }
</style> 